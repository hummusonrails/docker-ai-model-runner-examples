#!/bin/bash

COMMIT_MSG_FILE=$1

# Capture the staged code changes as a variable
CODE_DIFF=$(git diff --cached)

# Generate the commit message using Docker Model Runner, passing the diff as input
COMMIT_MESSAGE=$(docker model run ignaciolopezluna020/llama3.2:1b "Generate a concise and descriptive Git commit message based on these code changes:
$CODE_DIFF")

# Write the generated message into the commit message file
echo "$COMMIT_MESSAGE" > "$COMMIT_MSG_FILE"
